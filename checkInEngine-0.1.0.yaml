---
components:
  schemas:
    loadControlJson:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-state-id: "1"
      x-ep-schema-version-id: "xcp4atah6f8"
      $schema: "http://json-schema.org/draft-07/schema#"
      x-ep-schema-id: "j8wcfqr2j8b"
      x-ep-schema-state-name: "DRAFT"
      x-ep-schema-name: "loadControlJson"
      title: "Generated schema for Root"
      type: "object"
      properties:
        flightNo:
          type: "string"
        noOfBaggage:
          type: "number"
        noOfPax:
          type: "number"
      required:
      - "flightNo"
      - "noOfPax"
      - "noOfBaggage"
      x-ep-schema-version-displayname: ""
    flightInfo:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-state-id: "1"
      x-ep-schema-version-id: "s1b9jd24hbd"
      $schema: "http://json-schema.org/draft-07/schema#"
      x-ep-schema-id: "fvpgsvxij83"
      x-ep-schema-state-name: "DRAFT"
      x-ep-schema-name: "flightInfo"
      title: "Generated schema for Root"
      type: "object"
      properties:
        flightNo:
          type: "number"
        flightStatus:
          type: "string"
      required:
      - "flightNo"
      - "flightStatus"
      x-ep-schema-version-displayname: ""
    passengerInfo:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-state-id: "2"
      x-ep-schema-version-id: "uk190ifiy3p"
      $schema: "http://json-schema.org/draft-07/schema#"
      x-ep-schema-id: "s6c0hp2vgf8"
      x-ep-schema-state-name: "RELEASED"
      x-ep-schema-name: "passengerInfo"
      title: "Generated schema for Root"
      type: "object"
      properties:
        passengerAction:
          type: "string"
        destination:
          type: "string"
        passengerId:
          type: "number"
        tripId:
          type: "string"
        vipStatus:
          type: "string"
      required:
      - "passengerId"
      - "tripId"
      - "passengerAction"
      - "destination"
      - "vipStatus"
      x-ep-schema-version-displayname: ""
  messages:
    loadControl:
      x-ep-event-id: "ft1uusf7jgr"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "9tt4mfcikth"
      payload:
        $ref: "#/components/schemas/loadControlJson"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "loadControl"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    cancelledBooking:
      x-ep-event-id: "5223g56puho"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "ay9mtw8em3s"
      payload:
        $ref: "#/components/schemas/passengerInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "cancelledBooking"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    lounge:
      x-ep-event-id: "rsma7e39yhz"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "wa26omwuawb"
      payload:
        $ref: "#/components/schemas/passengerInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "lounge"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    foreignImmigration:
      x-ep-event-id: "84hwkrc81ec"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "v57edhy2mal"
      payload:
        $ref: "#/components/schemas/passengerInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "foreignImmigration"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    newDepartureTime:
      x-ep-event-id: "8qp7lj64fdu"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "gztafjf7u2j"
      payload:
        $ref: "#/components/schemas/flightInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "newDepartureTime"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    flightStatus:
      x-ep-event-id: "t7k8bk9d33e"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "duavmpt967p"
      payload:
        $ref: "#/components/schemas/flightInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "flightStatus"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    boardingStatus:
      x-ep-event-id: "qd260ebysig"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "6dpfo2fa5b2"
      payload:
        $ref: "#/components/schemas/passengerInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "boardingStatus"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    immigrationCheckStatus:
      x-ep-event-id: "6pn2fe2vkpe"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "va5hwmu01ch"
      payload:
        $ref: "#/components/schemas/passengerInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "immigrationCheckStatus"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    bookingDetails:
      x-ep-event-id: "ffou00dd34h"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "agmuhz4crvc"
      payload:
        $ref: "#/components/schemas/passengerInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "bookingDetails"
      description: "{PNR}    = PNR generated for passenger\n{dep}     = Departure\
        \ airport\n{arrival} = Arrival airport\n{class}   = booking class - Y for\
        \ economy and J for business class"
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
channels:
  myair/reservation/bookingCancelled/v1/{PNR}:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "checkIn.checkInEngine.bookingCancelled"
              topicSubscriptions:
              - "myair/reservation/bookingCancelled/v1/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/cancelledBooking"
    parameters:
      PNR:
        schema:
          type: "string"
        x-ep-parameter-name: "PNR"
  myair/reservation/bookingCreated/v1/{PNR}/{flightNo}/{dep}/{arrival}/{date}/{class}:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "checkIn.checkInEngine.bookingCreated"
              topicSubscriptions:
              - "myair/reservation/bookingCreated/v1/*/*/*/*/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/bookingDetails"
    parameters:
      date:
        schema:
          type: "string"
        x-ep-parameter-name: "date"
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      PNR:
        schema:
          type: "string"
        x-ep-parameter-name: "PNR"
      arrival:
        schema:
          type: "string"
        x-ep-parameter-name: "arrival"
      class:
        schema:
          type: "string"
          enum:
          - "businessClass"
          - "economyClass"
          - "firstClass"
        x-ep-enum-version-displayname: "v1"
        x-ep-enum-version: "0.1.0"
        x-ep-enum-name: "bookingClass"
        x-ep-enum-state-id: "1"
        x-ep-enum-version-id: "sa7a0p758ej"
        x-ep-enum-id: "45gnorq45pm"
        x-ep-parameter-name: "class"
      dep:
        schema:
          type: "string"
        x-ep-parameter-name: "dep"
  myair/boarding/v1/{flightNo}/{boardingStatus}:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "checkIn.checkInEngine.boarding"
              topicSubscriptions:
              - "myair/boarding/v1/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/boardingStatus"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      boardingStatus:
        schema:
          type: "string"
          enum:
          - "status"
        x-ep-enum-version-displayname: "v1"
        x-ep-enum-version: "0.1.0"
        x-ep-enum-name: "boardingStatus"
        x-ep-enum-state-id: "1"
        x-ep-enum-version-id: "gbuskq309d3"
        x-ep-enum-id: "2oxcvapwf8p"
        x-ep-parameter-name: "boardingStatus"
  myair/checkIn/v1/{flightNo}/{noOfPax}/{noOfBaggage}:
    subscribe:
      message:
        $ref: "#/components/messages/loadControl"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      noOfBaggage:
        schema:
          type: "string"
        x-ep-parameter-name: "noOfBaggage"
      noOfPax:
        schema:
          type: "string"
        x-ep-parameter-name: "noOfPax"
  myair/checkIn/v1/{flightNo}/{flightStatus}:
    subscribe:
      message:
        $ref: "#/components/messages/flightStatus"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      flightStatus:
        schema:
          type: "string"
        x-ep-parameter-name: "flightStatus"
  myair/checkIn/v1/{flightNo}/{newDepartureTime}:
    subscribe:
      message:
        $ref: "#/components/messages/newDepartureTime"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      newDepartureTime:
        schema:
          type: "string"
        x-ep-parameter-name: "newDepartureTime"
  myair/checkIn/v1/{passportNo}/{firstName}/{lastName}/{flightNo}/{arrival}:
    subscribe:
      message:
        $ref: "#/components/messages/foreignImmigration"
    parameters:
      passportNo:
        schema:
          type: "string"
        x-ep-parameter-name: "passportNo"
      firstName:
        schema:
          type: "string"
        x-ep-parameter-name: "firstName"
      lastName:
        schema:
          type: "string"
        x-ep-parameter-name: "lastName"
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      arrival:
        schema:
          type: "string"
        x-ep-parameter-name: "arrival"
  myair/foreignAffairs/v1/{passportNo}/{status}:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "checkIn.checkInEngine.foreignAffairs"
              topicSubscriptions:
              - "myair/foreignAffairs/v1/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/immigrationCheckStatus"
    parameters:
      passportNo:
        schema:
          type: "string"
        x-ep-parameter-name: "passportNo"
      status:
        schema:
          type: "string"
        x-ep-parameter-name: "status"
  myair/checkIn/v1/{flightNo}/{noOfPax}:
    subscribe:
      message:
        $ref: "#/components/messages/lounge"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      noOfPax:
        schema:
          type: "string"
        x-ep-parameter-name: "noOfPax"
asyncapi: "2.5.0"
info:
  x-ep-application-version: "0.1.0"
  x-ep-application-version-id: "f5l79hy2tqn"
  x-ep-application-id: "ot7mbe89w3y"
  x-ep-state-name: "DRAFT"
  title: "checkInEngine"
  x-ep-application-domain-id: "e0hs9g8h5qi"
  version: "0.1.0"
  x-ep-state-id: "1"
  x-ep-application-domain-name: "Demo Account-checkIn"

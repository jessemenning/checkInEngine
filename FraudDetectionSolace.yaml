---
components:
  schemas:
    AccountAction:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-version-id: "thxbkirnsdk"
      $schema: "https://json-schema.org/draft/2019-09/schema"
      description: "An action to be taken on a customer account"
      x-ep-schema-state-name: "RELEASED"
      x-ep-schema-name: "AccountAction"
      title: "Account Action"
      type: "object"
      required:
      - "accountNum"
      - "accountAction"
      - "timestamp"
      x-ep-schema-version-displayname: "0.1.0"
      x-ep-schema-state-id: "2"
      x-ep-schema-id: "lp4ha2i3btt"
      properties:
        accountAction:
          description: "An action to be taken on an account."
          type: "string"
        accountNum:
          description: "The unique identifer of an account."
          type: "integer"
        timestamp:
          description: "The time stamp of the event."
          type: "string"
      $id: "https://example.com/account-action.schema.json"
    Transaction:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-version-id: "f5qfyu2b2xw"
      $schema: "https://json-schema.org/draft/2019-09/schema"
      description: "A transaction conducted by an account."
      x-ep-schema-state-name: "RELEASED"
      x-ep-schema-name: "Transaction"
      title: "Transaction"
      type: "object"
      required:
      - "transactionNum"
      - "accountNum"
      - "transactionType"
      - "amount"
      - "currency"
      - "timestamp"
      x-ep-schema-version-displayname: "0.1.0"
      x-ep-schema-state-id: "2"
      x-ep-schema-id: "745ofweguq0"
      properties:
        transactionType:
          description: "The transaction type."
          type: "string"
        amount:
          description: "The transaction amount."
          type: "number"
        transactionNum:
          description: "The unique identifier of the transaction."
          type: "integer"
        accountNum:
          description: "The unique identifer of an account."
          type: "integer"
        currency:
          description: "The currency of the transaction."
          type: "string"
        timestamp:
          description: "The time stamp of the event."
          type: "string"
      $id: "https://example.com/transaction.schema.json"
    Transfer:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-version-id: "f9dctq27d68"
      $schema: "https://json-schema.org/draft/2019-09/schema"
      description: "A transfer conducted by an account."
      x-ep-schema-state-name: "RELEASED"
      x-ep-schema-name: "Transfer"
      title: "Transfer"
      type: "object"
      required:
      - "transactionNum"
      - "sourceAccountNum"
      - "targetAccountNum"
      - "transactionType"
      - "amount"
      - "currency"
      - "transferDateTime"
      - "timestamp"
      x-ep-schema-version-displayname: "0.1.0"
      x-ep-schema-state-id: "2"
      x-ep-schema-id: "pgiifrza22j"
      properties:
        transactionType:
          description: "The transaction type."
          type: "string"
        amount:
          description: "The transaction amount."
          type: "number"
        transactionNum:
          description: "The unique identifier of the transaction."
          type: "integer"
        targetAccountNum:
          description: "The unique identifer of the source account."
          type: "integer"
        sourceAccountNum:
          description: "The unique identifer of the source account."
          type: "integer"
        currency:
          description: "The currency of the transaction."
          type: "string"
        transferDateTime:
          description: "When should the transfer be done."
          type: "string"
        timestamp:
          description: "The time stamp of the event."
          type: "string"
      $id: "https://example.com/transfer.schema.json"
    FraudDetected:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-version-id: "ocm3pq8lozd"
      $schema: "https://json-schema.org/draft/2019-09/schema"
      description: "A detected possible fraud."
      x-ep-schema-state-name: "RELEASED"
      x-ep-schema-name: "FraudDetected"
      title: "Fraud Detected"
      type: "object"
      required:
      - "transactionNum"
      - "accountNum"
      - "transactionType"
      - "amount"
      - "currency"
      - "incidentDescription"
      - "incidentTimestamp"
      - "timestamp"
      x-ep-schema-version-displayname: "0.1.0"
      x-ep-schema-state-id: "2"
      x-ep-schema-id: "r98lp9r951s"
      properties:
        transactionType:
          description: "The transaction type."
          type: "string"
        amount:
          description: "The transaction amount."
          type: "number"
        incidentTimestamp:
          description: "When the alleged incident took place."
          type: "string"
        transactionNum:
          description: "The unique identifier of the transaction."
          type: "integer"
        accountNum:
          description: "The unique identifer of an account."
          type: "integer"
        detectionNum:
          description: "The unique identifier of the possible fraud detected."
          type: "integer"
        currency:
          description: "The currency of the transaction."
          type: "string"
        incidentDescription:
          description: "The description of the possible fraud."
          type: "string"
        timestamp:
          description: "The time stamp of the event."
          type: "string"
      $id: "https://example.com/fraud-detected.schema.json"
  messages:
    AccountSuspendedSolace:
      x-ep-event-id: "0246u63ba16"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "7k9y7mauxic"
      payload:
        $ref: "#/components/schemas/FraudDetected"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "AccountSuspendedSolace"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    DepositSolace:
      x-ep-event-id: "84tta9z0x8n"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "sqp013ihg3x"
      payload:
        $ref: "#/components/schemas/Transaction"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "DepositSolace"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    WithdrawalSolace:
      x-ep-event-id: "z70ac3wnsvb"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "x5f4x5vtq97"
      payload:
        $ref: "#/components/schemas/Transaction"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "WithdrawalSolace"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    FraudDetectedSolace:
      x-ep-event-id: "0js658wemjb"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "vui90of9hiw"
      payload:
        $ref: "#/components/schemas/FraudDetected"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "FraudDetectedSolace"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    CreditCardPaymentSolace:
      x-ep-event-id: "tw6njz7pman"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "cwtgiwbmgrv"
      payload:
        $ref: "#/components/schemas/AccountAction"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "CreditCardPaymentSolace"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    TransferSolace:
      x-ep-event-id: "2gqoy4mm993"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "lc392aizd92"
      payload:
        $ref: "#/components/schemas/Transfer"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "TransferSolace"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
channels:
  acmebank/fraud/detect/validate:
    subscribe:
      message:
        $ref: "#/components/messages/FraudDetectedSolace"
  acmebank/core/transfer:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "acmebank.core.transfer"
              topicSubscriptions:
              - "acmebank/core/transfer"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/TransferSolace"
  acmebank/account/suspended:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "acmebank.account.suspended"
              topicSubscriptions:
              - "acmebank/account/suspended"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/AccountSuspendedSolace"
  acmebank/core/payment/creditcard:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "acmebank.core.payment.creditcard"
              topicSubscriptions:
              - "acmebank/core/payment/creditcard"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/CreditCardPaymentSolace"
  acmebank/core/withdrawal:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "acmebank.core.withdrawal"
              topicSubscriptions:
              - "acmebank/core/withdrawal"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/WithdrawalSolace"
  acmebank/core/deposit:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "acmebank.core.deposit"
              topicSubscriptions:
              - "acmebank/core/deposit"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/DepositSolace"
asyncapi: "2.5.0"
x-ep-application-domain-name: "Demo Account-ACME Bank"
info:
  x-ep-application-version: "0.1.0"
  x-ep-application-version-id: "m15t431vqyf"
  x-ep-application-id: "yamj8qcj786"
  description: "Solace Version of Fraud application x"
  x-ep-state-name: "DRAFT"
  title: "Fraud Detection Solace"
  x-ep-application-domain-id: "l5fqd9g6o45"
  version: "0.1.0"
  x-ep-state-id: "1"
  x-ep-application-domain-name: "Demo Account-ACME Bank"

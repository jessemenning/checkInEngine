---
components:
  schemas:
    flightInfo:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-state-id: "1"
      x-ep-schema-version-id: "ygh1wf0mpg8"
      $schema: "http://json-schema.org/draft-07/schema#"
      x-ep-schema-id: "hmzupfx789g"
      x-ep-schema-state-name: "DRAFT"
      x-ep-schema-name: "flightInfo"
      title: "Generated schema for Root"
      type: "object"
      properties:
        flightNo:
          type: "number"
        flightStatus:
          type: "string"
      required:
      - "flightNo"
      - "flightStatus"
      x-ep-schema-version-displayname: ""
    loadControlJson:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-state-id: "1"
      x-ep-schema-version-id: "wcvs39mogq6"
      $schema: "http://json-schema.org/draft-07/schema#"
      x-ep-schema-id: "oawhvpdbgw0"
      x-ep-schema-state-name: "DRAFT"
      x-ep-schema-name: "loadControlJson"
      title: "Generated schema for Root"
      type: "object"
      properties:
        flightNo:
          type: "string"
        noOfBaggage:
          type: "number"
        noOfPax:
          type: "number"
      required:
      - "flightNo"
      - "noOfPax"
      - "noOfBaggage"
      x-ep-schema-version-displayname: ""
    bookingInfo:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-state-id: "1"
      x-ep-schema-version-id: "nlocbs58wen"
      $schema: "http://json-schema.org/draft-07/schema#"
      x-ep-schema-id: "kitlj5c5j7s"
      x-ep-schema-state-name: "DRAFT"
      x-ep-schema-name: "bookingInfo"
      title: "Generated schema for Root"
      type: "object"
      properties:
        date:
          type: "number"
        flightNo:
          type: "string"
        PNR:
          type: "string"
        arrival:
          type: "string"
        class:
          type: "number"
        dep:
          type: "string"
      required:
      - "PNR"
      - "flightNo"
      - "dep"
      - "arrival"
      - "date"
      - "class"
      x-ep-schema-version-displayname: ""
    passengerInfo:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-state-id: "2"
      x-ep-schema-version-id: "sqetk5gzjof"
      $schema: "http://json-schema.org/draft-07/schema#"
      x-ep-schema-id: "gimwx2or1wh"
      x-ep-schema-state-name: "RELEASED"
      x-ep-schema-name: "passengerInfo"
      title: "Generated schema for Root"
      type: "object"
      properties:
        passengerAction:
          type: "string"
        destination:
          type: "string"
        passengerId:
          type: "number"
        tripId:
          type: "string"
        vipStatus:
          type: "string"
      required:
      - "passengerId"
      - "tripId"
      - "passengerAction"
      - "destination"
      - "vipStatus"
      x-ep-schema-version-displayname: ""
  messages:
    loadControl:
      x-ep-event-id: "kjlicae6a9i"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "tr8zeu14jac"
      payload:
        $ref: "#/components/schemas/loadControlJson"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "loadControl"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    cancelledBooking:
      x-ep-event-id: "2ugggw5pe3u"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "1o2na96v63o"
      payload:
        $ref: "#/components/schemas/bookingInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "cancelledBooking"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    lounge:
      x-ep-event-id: "asgdoi8uotd"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "fq2n54opire"
      payload:
        $ref: "#/components/schemas/passengerInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "lounge"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    foreignImmigration:
      x-ep-event-id: "80fw2bk69rl"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "b002hw6ome0"
      payload:
        $ref: "#/components/schemas/passengerInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "foreignImmigration"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    newDepartureTime:
      x-ep-event-id: "qak80rvjljf"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "pa7oyogbfxy"
      payload:
        $ref: "#/components/schemas/flightInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "newDepartureTime"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    flightStatus:
      x-ep-event-id: "zgz7gkrdk5j"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "f8lrv4pv1ah"
      payload:
        $ref: "#/components/schemas/flightInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "flightStatus"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    boardingStatus:
      x-ep-event-id: "rzb80shzpl7"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "xe9x780qhg1"
      payload:
        $ref: "#/components/schemas/passengerInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "boardingStatus"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
    bookingDetails:
      x-ep-event-id: "rxspcm70ajx"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "0wr1g0r8i48"
      payload:
        $ref: "#/components/schemas/bookingInfo"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "bookingDetails"
      description: ""
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      contentType: "application/json"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
channels:
  myair/reservation/bookingCancelled/v1/{PNR}:
    x-ep-event-name: "bookingCancelled"
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "checkIn.checkInEngine.bookingCancelled"
              topicSubscriptions:
              - "myair/reservation/bookingCancelled/v1/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/cancelledBooking"
    parameters:
      PNR:
        schema:
          type: "string"
        x-ep-parameter-name: "PNR"
  myair/reservation/bookingCreated/v1/{PNR}/{flightNo}/{dep}/{arrival}/{date}/{class}:
    x-ep-event-name: "bookingCreated"
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "checkIn.checkInEngine.bookingCreated"
              topicSubscriptions:
              - "myair/reservation/bookingCreated/v1/*/*/*/*/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/bookingDetails"
    parameters:
      date:
        schema:
          type: "string"
        x-ep-parameter-name: "date"
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      PNR:
        schema:
          type: "string"
        x-ep-parameter-name: "PNR"
      arrival:
        schema:
          type: "string"
        x-ep-parameter-name: "arrival"
      class:
        schema:
          type: "string"
        x-ep-parameter-name: "class"
      dep:
        schema:
          type: "string"
        x-ep-parameter-name: "dep"
  myair/boarding/v1/{flightNo}/{boardingStatus}:
    x-ep-event-name: "boardingStatus"
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "checkIn.checkInEngine.boarding"
              topicSubscriptions:
              - "myair/boarding/v1/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/boardingStatus"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      boardingStatus:
        schema:
          type: "string"
          enum:
          - "status"
        x-ep-enum-version-displayname: "v1"
        x-ep-enum-version: "0.1.0"
        x-ep-enum-name: "boardingStatus"
        x-ep-enum-state-id: "1"
        x-ep-enum-version-id: "0g6behndvp0"
        x-ep-enum-id: "jhrf2nxbrmc"
        x-ep-parameter-name: "boardingStatus"
  myair/checkIn/v1/{flightNo}/{flightStatus}:
    x-ep-event-name: "flightStatus"
    subscribe:
      message:
        $ref: "#/components/messages/flightStatus"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      flightStatus:
        schema:
          type: "string"
        x-ep-parameter-name: "flightStatus"
  myair/checkIn/v1/{flightNo}/{noOfPax}/{noOfBaggage}:
    x-ep-event-name: "loadControl"
    subscribe:
      message:
        $ref: "#/components/messages/loadControl"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      noOfBaggage:
        schema:
          type: "string"
        x-ep-parameter-name: "noOfBaggage"
      noOfPax:
        schema:
          type: "string"
        x-ep-parameter-name: "noOfPax"
  myair/checkIn/v1/{passportNo}/{firstName}/{lastName}/{flightNo}/{arrival}:
    x-ep-event-name: "foreignImmigration"
    subscribe:
      message:
        $ref: "#/components/messages/foreignImmigration"
    parameters:
      passportNo:
        schema:
          type: "string"
        x-ep-parameter-name: "passportNo"
      firstName:
        schema:
          type: "string"
        x-ep-parameter-name: "firstName"
      lastName:
        schema:
          type: "string"
        x-ep-parameter-name: "lastName"
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      arrival:
        schema:
          type: "string"
        x-ep-parameter-name: "arrival"
  myair/checkIn/v1/{flightNo}/{newDepartureTime}:
    x-ep-event-name: "newDepartureTime"
    subscribe:
      message:
        $ref: "#/components/messages/newDepartureTime"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      newDepartureTime:
        schema:
          type: "string"
        x-ep-parameter-name: "newDepartureTime"
  myair/checkIn/v1/{flightNo}/{noOfPax}:
    x-ep-event-name: "lounge"
    subscribe:
      message:
        $ref: "#/components/messages/lounge"
    parameters:
      flightNo:
        schema:
          type: "string"
        x-ep-parameter-name: "flightNo"
      noOfPax:
        schema:
          type: "string"
        x-ep-parameter-name: "noOfPax"
asyncapi: "2.5.0"
info:
  x-ep-application-version: "0.1.0"
  x-ep-application-version-id: "opab2sb1koy"
  x-ep-application-id: "44c6ev6q0hd"
  x-ep-state-name: "DRAFT"
  title: "checkInEngine"
  x-ep-application-domain-id: "gcvr5gva4nv"
  version: "0.1.0"
  x-ep-state-id: "1"
  x-ep-application-domain-name: "Demo Account-checkIn"
